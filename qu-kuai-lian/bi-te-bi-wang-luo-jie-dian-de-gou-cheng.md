## 比特币网络节点的构成

比特币网络是一种**点对点的数字现金系统（P2P）**，网络节点中每台机器都彼此对等。P2P网络不存在任何服务端、层级关系或者中心化服务。

### 节点类型与分工

### ![](/assets/比特币网络节点分工.png)

一个全功能节点包含上述4个模块【钱包**W**allet】【矿工**M**iner】【完整区块链full **B**lock-chain database】【网络路由节点**N**etwork routing】

* 【网络路由节点】使得节点具有**参与验证并传播交易与区块信息，发现监听并维持点对点的链接**的能力

* 【完整区块链】具有此模块的节点被称为：全节点。它能够**独自自主的校验所有交易**，不需要任何其他信息。

* 【钱包】比特币的所有权是通过数字密钥、比特币地址和数字签名来确定的，数字密钥实际上并不是存储在网络中，而是由用户生成并存储在一个文件或简单的数据库中，称为钱包。有些节点仅仅保留**区块链的一部分**，通过一种”简易支付验证“（SPV Simplified Payment Verification）的方法来完成交易。

* 【矿工】挖矿节点以相互竞争的方式创造新的区块。有一些挖矿节点也是全节点，可以独立挖矿；还有一些参与矿池挖矿的节点是轻量级节点，**必须依赖矿池服务器维护全节点进行工作。**

拥有全部四个模块被称之为**核心客户端（Bitcoin Core）**，除了这些主要节点类型外，还有一些服务器及节点运行其他协议，如特殊矿池挖矿协议、轻量级客户端访问协议。

下表为扩展比特币网络的不同节点类型  
![](/assets/比特币网络的不同节点.png)

### 扩展比特币网络

要在全世界的网络中完成整个的交易，下图描述了一个扩展比特币网络，它包含了多重类型的节点、网关服务器、边缘路由器、钱包客户端以及它们互相连接所需要的各类协议，比特币互相连接的接口一般使用`8333端口`

### ![](/assets/扩展比特币网络.png)

### 如何控制区块产生速度恒定

#### 难度系数 

我们在发明比特币的过程已经详细说明了**工作量证明**寻找一个特殊数字使得SHA256函数的输出字符串的前`n`位是零

对于每一种不同的加密货币来说，都有**一个值**需要在建立货币的时候时候被定义，即**每一个新区块在当前全网算力的条件被发现的【平均时间】**，这也是难度系数的由来。

### 

### 参考

* [https://charlesliuyx.github.io/2017/09/24/一文弄懂区块链-以比特币为例/](https://charlesliuyx.github.io/2017/09/24/一文弄懂区块链-以比特币为例/)



